START:
MVI E,00H
LDA 2000H        ; диабафы апо еисодо
MOV C,A   
MVI B,00H        ;
ANI 03H          ; аполомымы та 2 текеутаиа ьгжиа
CALL SUBR_0      ; еды ха амабоуле то LSB
MOV A,C           
ANI 0CH          ; аполомымы та (а1 б1) 
CALL SUBR_1      ; йаи пгцаимы стгм упояоутима_1
MOV A,C           
ANI 30H          ; аполомымы та (а2 б2)
CALL SUBR_2      ; йаи пгцаимы стгм упояоутима_2
MOV A,C
ANI 80H          ; аполомымы та (а3 б3)
MOV D,A
MOV A,C
ANI 40H
RLC
ANA D            ; укопоиы тгм пукг AND
XRA E            ; укопоиы тгм пукг XOR
CALL SUBR_3      ; йаи пгцаимы стгм упояоутима_3
MOV A,B           
CMA
STA 3000H        ; йаи елжамифы то апотекесла

JMP START        ; цуяифы стгм аявг циа ма епитувы тгм сумевг кеитоуяциа


SUBR_0:         
CPI 01H          ; екецвы ам то б0 еимаи ом
JZ LABEL_0       ; ам маи пгцаимы йаи амабы то 1О калпайи
CPI 02H          ; екецвы ам то а0 еимаи ом
JZ LABEL_0       ; ам маи пгцаимы йаи амабы то 1О калпайи
CPI 03H          ; екецвы ам йаи то б0 йаи то а0 еимаи ом
JZ LABEL_0       ; ам маи пгцаимы йаи амабы то 1О калпайи
MVI B,00H        ; аккиыс елжамифы оти еива пяим (то лгдем еды)
JMP RETURN_0     ; йаи епистяежы апо тг яоутима
LABEL_0:         
MVI B,01H        ; амабы то калпайи поу пяепеи      
RETURN_0:        ; йаи епистяежы апо тг яоутима
RET 







SUBR_1:
CPI 0CH          ; екецвы ам та а1 йаи б1 еимаи ом 
JZ LABEL_1       ; ам маи паы йаи амабы то 2О калпайи
MVI A,00H        ; аккиыс ажгмы оти гтам пяим амалемо ломо
ORA B
MOV B,A
JMP RETURN_1     ; йаи епистяежы апо тг яоутима
LABEL_1:
MVI A,02H        ; амабы то 2О калпайи аи оти акко гтам пяим
ORA B 
MOV B,A      
RETURN_1:        ; епистяежы апо тг яоутима
RET







SUBR_2:
CPI 10H          ; екецвы ам то б2 еимаи ом
JZ LABEL_2       ; ам маи паы йаи амабы то 3О калпайи
CPI 20H          ; екецвы ам то а2 еимаи ом 
JZ LABEL_2       ; ам маи паы йаи амабы то 3О калпайи
CPI 30H          ; екецвы ам та а2 йаи б2 еимаи ом
JZ LABEL_2       ; ам маи паы йаи амабы то 3О калпайи
MVI A,00H        ; аккиыс ажгмы оти еива пяим амалемо ломо
ORA B 
MOV B,A
JMP RETURN_2     ; йаи епистяежы апо тг яоутима
LABEL_2:
MVI A,04H        ; амабы то 3о калпайи йаи оти акко гтам пяим амалемо
ORA B
MOV B,A
MVI A,80H
MOV E,A       
RETURN_2:        ; епистяежы апо тг яоутима
RET




SUBR_3:
CPI 80H          ; екецвы ам пяепеи ма амаьеи то 4О калпайи
JZ LABEL_3       ; ам маи паы йаи амабы то 4О калпайи
MVI A,00H        ; аккиыс ажгмы оти еива пяим амалемо ломо
ORA B
MOV B,A
JMP RETURN_3     ; йаи епистяежы апо тг яоутима
LABEL_3:
MVI A,08H        ; амабы то 4О калпайи йаи оти акко еива пяим
ORA B
MOV B,A
RETURN_3:        ; епистяежы апо тг яоутима
RET



END