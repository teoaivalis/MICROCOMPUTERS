IN 10H                ;аясг тгс пяостасиас лмглгс 
START:                
LXI H,0A00H           ;нейимале апо тг хесг лмглгс 0а00 циа тгм ейтупысг сто DISPLAY 
MVI M,10H             ;то 10г сглаимеи оти дем ейтупымоуле типота сто амтистоиво SEVEN-SEGMENT LED 
INX H
MVI M,10H
INX H
MVI M,10H
INX H 
MVI M,10H             ;йамоуле тг диадийасиа аутг циа тис тессеяис хесеис лмглгс 0а00г-0а03г поу тис амтистоивифоуле ста тессеяа дениотеяа ьгжиа тоу DISPLAY 


MVI C,0AH             ;то пяыто ояио й1 исоутаи ле 10 йаи топохетеитаи стом йатавыягтг C
MVI D,64H             ;то деутеяо й2 исоутаи ле 100 йаи топохетеитаи стом йатавыягтг D
MVI E,C8H             ;то тяито й3 исоутаи ле 200 йаи топохетеитаи стом йатавыягтг е
INR C                 ;аунамоуле йата 1 та ояиа циа летепеита екецвоус
INR D
INR E


MVI A,0DH             ;йатавыяоуле стом а тгм тилг 00001101 пяойеилемоу ма емеяцопоигсоуле ломо тг ласйа тгР диайопгс RST6.5
SIM
EI                    ;емеяцопоигсг тым диайопым

WAIT:
JMP WAIT              ;атеялым бяовоос





INTR_ROUTINE:         ;яоутима енупгяетгсгс диайопгс
MVI D,64H             ;епамаявийопоиоуле тоус йатавыягтес D,E диоти аяцотеяа вамоум тис тилес тым ояиым й2 йаи й3
MVI E,C8H
INR D
INR C
POP H                 ;аполайяумсг  апо тг стоиба тоу пеяиеволемоу тоу PC поу апохгйеутгйе ле тг диайопг
CALL KIND             ;диабафоуле апо то пкгйтяокоцио
LXI H,0A04H           ;диабафоуле то пяыто дейаенадийо ьгжио пот амтистоивеи ста 4 LSBS йаи то бафоуле стг хесг лмглгс 0а04
MOV M,A
INX H
CALL KIND             ;диабафоуле то деутеяо дейаенадийо ьгжио поу амтистоивеи ста 4 MSBS 
MOV M,A               ; то топохетоуле стг хесг лмглгс 0а05 поу амтистоивифетаи сто аяистеяо LED тоу DISPLAY
RLC
RLC
RLC
RLC                   ;йамоуле 4 аяистеяес пеяистяожес циа ма жеяоуле та BITS стис йатаккгкес хесеис
LXI H,0A04H
MOV B,M
ADD B
MOV B,A               ; о йатавыягтгс б евеи то сумокийо аяихло


MOV A,B
CMP C                 ;суцйяисг тоу аяихлоу лас ле то пяыто ояио
JC FIRST_LSB          ;ам еимаи лийяотеяо ╧ исо тоте ха амаьеи то пяыто LED (апо дениа)
CMP D                 ;суцйяисг ле то деутеяо ояио
JC SECOND_LSB         ;ам еимаи лийяотеяо ╧ исо тоте ха амаьеи то деутеяо LED
CMP E                 ;суцйяисг ле то тяито ояио 
JC THIRD_LSB          ;ам еимаи лийяотеяо ╧ исо тоте ха амаьеи то тяито LED

MVI A,08H             ;ам еимаи лецакутеяо апо то тяито ояио тоте ха пяепеи  ма амаьеи то тетаято LED
CMA                   ;йамоуле тгм амтистяожг циати та LED еимаи аямгтийгс коцийгс 
STA 3000H
JMP RESULT


FIRST_LSB:
MVI A,01H            ;бафоуле стом  а то 00000001 ысте ма амаьеи ломо то пяыто LED
CMA
STA 3000H
JMP RESULT


SECOND_LSB:
MVI A,02H            ;бафоуле стом а то 00000010 ысте ма амаьеи ломо то деутеяо LED
CMA
STA 3000H
JMP RESULT


THIRD_LSB:
MVI A,04H            ;бафоуле стом а то 00000100 ысте ма амаьеи ломо то тяито LED
CMA
STA 3000H
JMP RESULT



RESULT:
LXI D,0A00H         ;бафоуле стом дипко йатавыягтг D-E тг диеухумсг 0а00г (дениотеяг хесг)
CALL STDM
EI                  ;намаемеяцопоиоуле тис диайопес ысте ма пеяилемоуле йаи тгм еполемг 

PRINT:
CALL DCD            ;ейтупымоуле стгм охомг та дуо дейаенадийа ьгжиа поу евоуле паяеи апо то пкгйтяокоцио ста дуо аяистеяотеяа 7-SEGMENT LED
JMP PRINT           ;пеяилемоуле левяи тгм еполемг диайопг

END                



